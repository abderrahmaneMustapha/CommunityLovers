(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{210:function(e,t,n){e.exports=n(290)},284:function(e,t,n){},290:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(40),o=n.n(l),i=n(30),c=n(21);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var m=n(31),u=n(107),s=n(186),d=n(46),g=n(82),p=n(74),E=n(191),b=n(18),v=n(11),f=n(12);function h(){var e=Object(v.a)(["mutation refreshToken($token:String!) {\n    refreshToken(refreshToken : $token){\n        token,\n        payload,\n        success,\n        errors,\n    }\n}"]);return h=function(){return e},e}function y(){var e=Object(v.a)(["mutation verifyToken($token:String!){\n      verifyToken(token:$token){\n          errors,\n          success,\n          payload\n      }\n}"]);return y=function(){return e},e}function j(){var e=Object(v.a)(["mutation tokenAuth($email:String!, $password:String!){\n            tokenAuth(email:$email, password:$password){\n                token,\n                refreshToken,\n                errors,\n                success,\n                user{pk, email}\n            }\n}"]);return j=function(){return e},e}var O=Object(f.a)(j()),w=(Object(f.a)(y()),Object(f.a)(h())),C=n(104),k=Object(g.b)({uri:"http://localhost:8000/graphql/"}),S=Object(C.a)((function(e){var t=e.graphQLErrors,n=(e.networkError,e.operation),a=e.forward;if(console("a graph ql error"),t){var r,l=Object(s.a)(t);try{for(l.s();!(r=l.n()).done;){var o;switch(r.value.extensions.code){case"UNAUTHENTICATED":return Object(b.d)((void q.mutate({mutation:w,variables:{token:localStorage.getItem("jwt")}}).then((function(e){var t=e.data.data.refreshToken.token;return console.log("im refreshhing the toke",t),t}))).catch((function(e){window.location.href="/signin"}))).filter((function(e){return Boolean(e)})).flatMap((function(e){var t=n.getContext().headers;return n.setContext({headers:Object(u.a)(Object(u.a)({},t),{},{authorization:"JWT ".concat(e)})}),a(n)}))}}}catch(o){l.e(o)}finally{l.f()}}})),A=Object(E.a)((function(e,t){var n=t.headers,a=localStorage.getItem("jwt");return{headers:Object(u.a)(Object(u.a)({},n),{},{Authorization:a?"JWT "+a:""})}})),q=new d.c({uri:"http://localhost:8000/graphql/",onError:S,link:b.a.from([A,k]),cache:new p.a});function $(){var e=Object(v.a)(["query{\n    me{\n      pk,\n      email\n    }\n  }"]);return $=function(){return e},e}var N=Object(f.a)($()),x=n(216),F=n(317),L=n(319),T=n(331),R=n(320),I=n(72),D=n(332);var _=function(){var e=Object(x.b)(N),t=e.data;if(!0===e.loading&&!t)return r.a.createElement("div",null,"Loading ... ");var n=t?t.me:void 0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{background:"dark-1",pad:"small"},n?r.a.createElement(L.a,{direction:"row"},[{label:"Dashboard",href:"/dashboard/me"},{label:"Logout",href:"/Logout"}].map((function(e){return r.a.createElement(T.a,{href:e.href,label:e.label,key:e.label})}))):r.a.createElement(L.a,{direction:"row"},[{label:"Login",href:"/signin"},{label:"Signup",href:"/signup"}].map((function(e){return r.a.createElement(T.a,{href:e.href,label:e.label,key:e.label})})))),r.a.createElement(R.a,{background:"dark-1",pad:"large",height:{min:"100vh"}},r.a.createElement(I.a,{gap:"small",direction:"column",align:"center",justify:"end",pad:{top:"medium",bottom:"small"}},r.a.createElement(D.a,{gap:"medium",align:"center",level:"1",size:"large"},"We Are Community Lovers"),r.a.createElement(D.a,{gap:"medium",align:"center",level:"2",size:"large"},"An open community platform"))))},Y=n(34),z=n.n(Y),J=n(53),M=n(15),P=n(115),B=n(22),U=B.b().shape({firstName:B.c().min(2,"Too Short!").max(100,"Too Long!").required("Required"),lastName:B.c().min(2,"Too Short!").max(100,"Too Long!").required("Required"),email:B.c().email("Please Enter a valide email adress").required("Required"),password1:B.c().min(8,"Too Short!").max(100,"Too Long!").required("Required"),password2:B.c().min(8,"Too Short!").max(100,"Too Long!").required("Required")}),V=n(66),W=n(321),K=n(328),H=n(299);function G(){var e=Object(v.a)(["mutation register($first_name:String!, $last_name:String!, $email:String!, \n                            $password1:String!, $password2:String!){                \n                            register(firstName: $first_name, lastName:$last_name, email:$email,\n                            password1: $password1, password2:$password2){\n                                success,\n                                errors,\n                                token,\n                                refreshToken\n                        }}"]);return G=function(){return e},e}var Q=Object(f.a)(G()),X=n(123),Z=n(124),ee=n(136),te=n(132),ne=function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){return Object(X.a)(this,n),t.apply(this,arguments)}return Object(Z.a)(n,[{key:"render",value:function(){var e=this,t=this.props.data;return this.props.errors_function?r.a.createElement("ul",null,t.errors?t.errors[this.props.errors_function].map((function(e){return r.a.createElement("li",null,e.message)})):void 0):r.a.createElement("ul",null,t.errors?t.errors.map((function(t){return t[e.props.error_field].map((function(e){return r.a.createElement("li",null,e)}))})):void 0)}}]),n}(r.a.Component),ae=function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){return Object(X.a)(this,n),t.apply(this,arguments)}return Object(Z.a)(n,[{key:"render",value:function(){var e=this.props.data;return console.log(e),console.log(this.props.auth),e.token&&!0===this.props.auth&&(console.log(e),localStorage.setItem("jwt",e.token),localStorage.setItem("user_id",e.user.id)),r.a.createElement(r.a.Fragment,null,0===e.errors.length?r.a.createElement("div",null,this.props.message):void 0)}}]),n}(r.a.Component);var re=function(e){var t=Object(x.a)(Q),n=Object(M.a)(t,2),a=n[0],l=n[1],o=l.data,i=l.error,m=l.loading,u=Object(V.a)({initialValues:{firstName:"",lastName:"",email:"",password1:"",password2:""},validationSchema:U,onSubmit:function(){var e=Object(J.a)(z.a.mark((function e(t){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(a({variables:{first_name:t.firstName,last_name:t.lastName,email:t.email,password1:t.password1,password2:t.password2}}).then((function(e){e.data.register.success&&(localStorage.setItem("jwt",e.data.register.token),localStorage.setItem("jwt_refresh",e.data.register.refreshToken),localStorage.setItem("user_email",Object(P.a)(e.data.register.token).email))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return i?r.a.createElement(r.a.Fragment,null,console.log("this is an error",i)):m?r.a.createElement("p",null,console.log("this is a loading",m)):o&&o.register.success?r.a.createElement(c.a,{to:{pathname:"/dashboard/me",state:{message:"User created successfuly"}}}):r.a.createElement(r.a.Fragment,null," ",o?r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,{data:o.addMember,error_field:"messages"}),r.a.createElement(ae,{data:o.addMember,message:"User created successfuly you will be redirected soon"})):void 0,r.a.createElement(W.a,{onSubmit:u.handleSubmit},r.a.createElement("label",{htmlFor:"firstName"},"First Name"),r.a.createElement(K.a,{id:"firstName",name:"firstName",placeholder:"Jane",onChange:u.handleChange}),u.errors.firstName&&u.touched.firstName?r.a.createElement("div",null,u.errors.firstName):null,r.a.createElement("label",{htmlFor:"lastName"},"Last Name"),r.a.createElement(K.a,{id:"lastName",name:"lastName",placeholder:"Doe",onChange:u.handleChange}),u.errors.lastName&&u.touched.lastName?r.a.createElement("div",null,u.errors.lastName):null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement(K.a,{id:"email",name:"email",placeholder:"example@example.com",type:"email",onChange:u.handleChange}),u.errors.email&&u.touched.email?r.a.createElement("div",null,u.errors.email):null,r.a.createElement("label",{htmlFor:"password1"},"Password"),r.a.createElement(K.a,{id:"password1",name:"password1",placeholder:"password",type:"password",onChange:u.handleChange}),u.errors.password1&&u.touched.password1?r.a.createElement("div",null,u.errors.password1):null,r.a.createElement("label",{htmlFor:"password2"},"Password Confirmation"),r.a.createElement(K.a,{id:"password2",name:"password2",placeholder:"password confirmation",type:"password",onChange:u.handleChange}),u.errors.password2&&u.touched.password2?r.a.createElement("div",null,u.errors.password2):null,r.a.createElement(H.a,{primary:!0,label:"Submit",type:"submit",color:"dark-1"})))};var le=function(){var e=Object(x.b)(N),t=e.data,n=e.loading,a=Object(c.g)();return n?r.a.createElement("div",null,"loading ...."):((t?t.me:void 0)&&a.push("/dashboard/me"),r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{fill:!0,align:"center",justify:"center"},r.a.createElement(I.a,{width:"medium"},r.a.createElement(F.a,{pad:"small"},r.a.createElement(D.a,{level:2,size:"medium"},"Signup")),r.a.createElement(re,null),r.a.createElement(T.a,{color:"dark-1",gap:"large",to:"/signin/"},"Already have an account create a one here")))))},oe=B.b().shape({email:B.c().email("Please Enter a valide email adress").required("Required"),password:B.c().min(8,"Too Short!").max(100,"Too Long!").required("Required")});var ie=function(){var e=Object(x.a)(O),t=Object(M.a)(e,2),n=t[0],a=t[1],l=a.data,o=a.loading,i=Object(V.a)({initialValues:{email:"",password:""},validationSchema:oe,onSubmit:function(){var e=Object(J.a)(z.a.mark((function e(t){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(n({variables:{email:t.email,password:t.password}}).then((function(e){e.data.tokenAuth.success&&(localStorage.setItem("jwt",e.data.tokenAuth.token),localStorage.setItem("jwt_refresh",e.data.tokenAuth.refreshToken),localStorage.setItem("user_email",Object(P.a)(e.data.tokenAuth.token).email))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return console.log(i),o?r.a.createElement("p",null,o):l&&l.tokenAuth.success?r.a.createElement(c.a,{from:"/signin",to:{pathname:"dashboard/me",state:{message:"Logged in successfuly"}}}):r.a.createElement(r.a.Fragment,null,l?r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,{data:l.tokenAuth,errors_function:"nonFieldErrors",error_field:"message"}),r.a.createElement(ae,{data:l.tokenAuth,auth:!0,message:"successfuly authentificated you will be redirected soon"})):void 0,r.a.createElement(W.a,null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement(K.a,{id:"email",name:"email",placeholder:"example@example.com",type:"email",onChange:i.handleChange}),i.errors.email&&i.touched.email?r.a.createElement("div",null,i.errors.email):null,r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(K.a,{id:"password",name:"password",placeholder:"password",type:"password",onChange:i.handleChange}),i.errors.password&&i.touched.password?r.a.createElement("div",null,i.errors.password):null,r.a.createElement(H.a,{primary:!0,color:"dark-1",label:"Submit",onClick:i.handleSubmit,type:"submit"})))};var ce=function(){var e=Object(x.b)(N),t=e.data,n=e.loading,a=Object(c.g)();return n?r.a.createElement("div",null,"loading ...."):((t?t.me:void 0)&&a.push("/dashboard/me"),r.a.createElement(I.a,{fill:!0,align:"center",pad:"small",justify:"center"},r.a.createElement(I.a,{width:"medium"},r.a.createElement(F.a,{pad:"small"},r.a.createElement(D.a,{level:2,size:"medium"},"Signin")),r.a.createElement(ie,null),r.a.createElement(T.a,{color:"dark-1",to:"signup/"},"Create new account"))))};var me=n(323),ue=n(204);function se(e){var t=Object(c.g)();return console.log("drop props ",e),r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{level:"5"},e.header),r.a.createElement(me.a,{data:e.data},(function(e){return r.a.createElement(I.a,{key:e.community.id,onClick:function(n){return t.push("/communities/".concat(e.community.slug))},fill:!0},r.a.createElement(ue.a,{size:"small"},e.community.name))})))}function de(){var e=Object(v.a)(["query getEventRequestAccepted($id:ID!){  \n  getEventRequestAccepted(id:$id){\n    id,\n    member{id,username,firstName,lastName,email}\n  }\n}"]);return de=function(){return e},e}function ge(){var e=Object(v.a)(["query getEventRequestPending($id:ID!){  \n  getEventRequestPending(id:$id){\n    id,\n    member{username,firstName,lastName,email}\n  }\n}"]);return ge=function(){return e},e}function pe(){var e=Object(v.a)(["\n  mutation acceptEventJoinRequest($id: ID!) {\n    acceptEventJoinRequest(id: $id) {\n      success\n      eventJoinReq {\n        id\n      }\n    }\n  }\n"]);return pe=function(){return e},e}function Ee(){var e=Object(v.a)(["\n  mutation createEventJoinRequest($eventId: ID!) {\n    createEventJoinRequest(eventId: $eventId) {\n      success\n      eventJoinReq {\n        id\n      }\n    }\n  }\n"]);return Ee=function(){return e},e}function be(){var e=Object(v.a)(["\n  query getCurrentEvent($id: ID!) {\n    getCurrentEvent(id: $id) {\n      id\n      name\n      slug\n      eventCreator {\n        owner {\n          firstName\n          lastName\n        }\n        community {\n          name\n          slug\n        }\n      }\n      description\n      position\n      startAt\n      endAt\n    }\n  }\n"]);return be=function(){return e},e}function ve(){var e=Object(v.a)(["\n  query getCommunityEventsBySlug($slug: String!) {\n    getCommunityEventsBySlug(slug: $slug) {\n      id\n      name\n      slug\n      description\n      position\n      startAt\n      endAt\n    }\n  }\n"]);return ve=function(){return e},e}function fe(){var e=Object(v.a)(["\n  query {\n    getAllUpcomingEvents {\n      id\n      name\n      eventCreator {\n        owner {\n          email\n        }\n        community {\n          name\n        }\n      }\n      slug\n      description\n      position\n      startAt\n      endAt\n    }\n  }\n"]);return fe=function(){return e},e}function he(){var e=Object(v.a)(["\n  query {\n    getAllPastEvents {\n      id\n      name\n      eventCreator {\n        owner {\n          email\n        }\n        community {\n          name\n        }\n      }\n      slug\n      description\n      position\n      startAt\n      endAt\n    }\n  }\n"]);return he=function(){return e},e}function ye(){var e=Object(v.a)(["\n  query {\n    getAllCurrentEvents {\n      id\n      name\n      eventCreator {\n        owner {\n          email\n        }\n        community {\n          name\n        }\n      }\n      slug\n      description\n      position\n      startAt\n      endAt\n    }\n  }\n"]);return ye=function(){return e},e}function je(){var e=Object(v.a)(["\n  query {\n    allEvents {\n      id\n      name\n      eventCreator {\n        owner {\n          email\n        }\n        community {\n          name\n        }\n      }\n      slug\n      description\n      position\n      startAt\n      endAt\n    }\n  }\n"]);return je=function(){return e},e}function Oe(){var e=Object(v.a)(["\n  mutation addEvent(\n    $name: String!\n    $eventCreator: ID!\n    $description: String!\n    $position: String!\n    $startAt: Date!\n    $endAt: Date!\n  ) {\n    addEvent(\n      input: {\n        name: $name\n        eventCreator: $eventCreator\n        description: $description\n        position: $position\n        startAt: $startAt\n        endAt: $endAt\n      }\n    ) {\n      errors {\n        field\n        messages\n      }\n      event {\n        id\n        name\n        slug\n        position\n      }\n    }\n  }\n"]);return Oe=function(){return e},e}var we=Object(f.a)(Oe()),Ce=(Object(f.a)(je()),Object(f.a)(ye())),ke=Object(f.a)(he()),Se=Object(f.a)(fe()),Ae=Object(f.a)(ve()),qe=Object(f.a)(be()),$e=Object(f.a)(Ee()),Ne=Object(f.a)(pe()),xe=Object(f.a)(ge()),Fe=Object(f.a)(de());function Le(){var e=Object(x.b)(ke),t=e.loading,n=e.data,a=Object(c.g)();return t?r.a.createElement("div",null,"Loading ... "):r.a.createElement(r.a.Fragment,null,n?r.a.createElement(me.a,{data:n.getAllPastEvents},(function(e){return r.a.createElement(I.a,{key:e.id,onClick:function(t){return a.push("/event/".concat(e.id))},fill:!0},r.a.createElement(D.a,{level:"4"},e.name),r.a.createElement(ue.a,{size:"small"}," ","by ",e.eventCreator.community.name),r.a.createElement(ue.a,{size:"small"}," on ",e.startAt),r.a.createElement(ue.a,{size:"small"}," place ",e.position))})):r.a.createElement("div",null,"Loading..."))}function Te(){var e=Object(x.b)(Ce),t=e.loading,n=e.data,a=Object(c.g)();return t?r.a.createElement("div",null,"Loading ... "):r.a.createElement(r.a.Fragment,null,n?r.a.createElement(me.a,{data:n.getAllCurrentEvents},(function(e){return r.a.createElement(I.a,{key:e.id,onClick:function(t){return a.push("/event/".concat(e.id))},fill:!0},r.a.createElement(D.a,{level:"4"},e.name),r.a.createElement(ue.a,{size:"small"}," ","by ",e.eventCreator.community.name),r.a.createElement(ue.a,{size:"small"}," on ",e.startAt),r.a.createElement(ue.a,{size:"small"}," place ",e.position))})):r.a.createElement("div",null,"Loading..."))}function Re(){var e=Object(x.b)(Se),t=e.loading,n=e.data;console.log(n);var a=Object(c.g)();return t?r.a.createElement("div",null,"Loading ... "):r.a.createElement(r.a.Fragment,null,n?r.a.createElement(me.a,{data:n.getAllUpcomingEvents},(function(e){return r.a.createElement(I.a,{key:e.id,onClick:function(t){return a.push("/event/".concat(e.id))},fill:!0},r.a.createElement(D.a,{level:"4"},e.name),r.a.createElement(ue.a,{size:"small"}," ","by ",e.eventCreator.community.name),r.a.createElement(ue.a,{size:"small"}," on ",e.startAt),r.a.createElement(ue.a,{size:"small"}," place ",e.position))})):r.a.createElement("div",null,"Loading..."))}function Ie(){var e=Object(v.a)(["\n  mutation acceptCommunityJoinRequest($id: ID!) {\n    acceptCommunityJoinRequest(id: $id) {\n      success\n      communityJoinReq {\n        id\n        member {\n          id\n        }\n      }\n    }\n  }\n"]);return Ie=function(){return e},e}function De(){var e=Object(v.a)(["\n  query getCommunityMembers($slug: String!) {\n    getCommunityMembers(slug: $slug) {\n      member {\n        id\n        email\n        firstName\n        lastName\n        city\n        profilePic\n        country\n      }\n    }\n  }\n"]);return De=function(){return e},e}function _e(){var e=Object(v.a)(["\n  query getCommunityJoinRequests($slug: String!) {\n    getCommunityJoinRequests(slug: $slug) {\n      id\n      member {\n        id\n        email\n        firstName\n        lastName\n      }\n    }\n  }\n"]);return _e=function(){return e},e}function Ye(){var e=Object(v.a)(["\n  mutation addCommunityJoinRequest($community: ID!) {\n    addCommunityJoinRequest(community: $community) {\n      success\n      communityJoinReq {\n        member {\n          id\n        }\n        community {\n          id\n        }\n      }\n    }\n  }\n"]);return Ye=function(){return e},e}function ze(){var e=Object(v.a)(["\n  query {\n    getCurrentUserCommunitys {\n      community {\n        name\n        slug\n      }\n      owner {\n        email\n      }\n    }\n  }\n"]);return ze=function(){return e},e}function Je(){var e=Object(v.a)(["\n  query {\n    getCurrentCommunityOwner {\n      id\n    }\n  }\n"]);return Je=function(){return e},e}function Me(){var e=Object(v.a)(["\n  query getCommunitysBySlug($slug: String!) {\n    getCommunitysBySlug(slug: $slug) {\n      id\n      owner {\n        id\n        email\n        dateJoined\n        username\n        firstName\n        lastName\n      }\n      community {\n        id\n        name\n        slug\n        createdAt\n      }\n    }\n  }\n"]);return Me=function(){return e},e}function Pe(){var e=Object(v.a)(["\n  mutation addOwnerToCommunity($owner: ID!, $community: ID!) {\n    addOwnerToCommunity(input: { owner: $owner, community: $community }) {\n      communityOwner {\n        id\n      }\n      errors {\n        field\n        messages\n      }\n    }\n  }\n"]);return Pe=function(){return e},e}function Be(){var e=Object(v.a)(["\n  mutation addCommunity($name: String!) {\n    addCommunity(input: { name: $name }) {\n      errors {\n        field\n        messages\n      }\n      community {\n        id\n        slug\n        name\n      }\n    }\n  }\n"]);return Be=function(){return e},e}var Ue=Object(f.a)(Be()),Ve=Object(f.a)(Pe()),We=Object(f.a)(Me()),Ke=(Object(f.a)(Je()),Object(f.a)(ze())),He=Object(f.a)(Ye()),Ge=Object(f.a)(_e()),Qe=Object(f.a)(De()),Xe=Object(f.a)(Ie()),Ze=n(324),et=n(333),tt=n(334),nt=[{label:"Create new Community",href:"/create-community"},{label:"Logout ",href:"/logout"}];var at=function(){var e=Object(x.b)(Ke),t=e.data,n=e.loading,a=r.a.useState(),l=Object(M.a)(a,2),o=l[0],i=l[1];return n||t||window.location.reload(!1),n||!t?r.a.createElement("div",null,"Loading"):r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{background:"dark-1",pad:"small"},r.a.createElement(L.a,{direction:"row"},nt.map((function(e){return r.a.createElement(T.a,{href:e.href,label:e.label,key:e.label})})),t?r.a.createElement(Ze.a,{label:"Options",open:o,onOpen:function(){i(!0)},onClose:function(){i(!1)},dropContent:r.a.createElement(se,{data:t.getCurrentUserCommunitys,header:"Communitys"}),dropProps:{align:{top:"bottom"}}}):void 0)),r.a.createElement(R.a,null,r.a.createElement(I.a,{pad:"small"},r.a.createElement(D.a,{level:"3"},"Here is what happening in Community Lovers")),r.a.createElement(I.a,{gap:"medium",pad:"large"},r.a.createElement(et.a,null,r.a.createElement(tt.a,{title:"Past events"},r.a.createElement(Le,null)),r.a.createElement(tt.a,{title:"Current events"},r.a.createElement(Te,null)),r.a.createElement(tt.a,{title:"Up comming events"},r.a.createElement(Re,null))))))},rt=B.b().shape({name:B.c().min(5,"Too Short!").max(100,"Too Long!").required("Required")});function lt(e){var t=Object(c.g)(),n=Object(a.useState)(e.current_user),l=Object(M.a)(n,1)[0],o=Object(x.a)(Ue),i=Object(M.a)(o,2),m=i[0],u=i[1],s=u.data,d=u.loading,g=u.error,p=Object(x.a)(Ve),E=Object(M.a)(p,1)[0],b=Object(V.a)({initialValues:{name:""},validationSchema:rt,onSubmit:function(){var e=Object(J.a)(z.a.mark((function e(n){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(m({variables:{name:n.name}}).then((function(e){if(e.data.addCommunity.errors.length<1){var n=e.data.addCommunity.community.id,a=e.data.addCommunity.community.slug;E({variables:{community:n,owner:l}}).then((function(e){e.data.addOwnerToCommunity.errors.length<1&&t.push("/communities/".concat(a))}))}})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return g&&console.log(g),d?r.a.createElement("p",null,d):r.a.createElement(r.a.Fragment,null,s?r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,{data:s.addCommunity,error_field:"messages"}),r.a.createElement(ae,{data:s.addCommunity,message:"Community created successfuly you will be redirected soon"})):void 0,r.a.createElement(W.a,null,r.a.createElement("label",{htmlFor:"name"},"Community"),r.a.createElement(K.a,{id:"name",name:"name",placeholder:"your community name",type:"text",onChange:b.handleChange}),b.errors.name&&b.touched.name?r.a.createElement("div",null,b.errors.name):null,r.a.createElement(H.a,{primary:!0,color:"dark-1",label:"Submit",onClick:b.handleSubmit,type:"submit"})))}var ot=[{label:"go back to dashboard",href:"dashboard/me"},{label:"Logout ",href:"/logout"}];var it=function(){var e=Object(x.b)(N),t=e.data,n=e.loading,a=e.error;return n?r.a.createElement("div",null,"loading..."):(a&&console.log(a),r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{background:"dark-1",pad:"small"},r.a.createElement(L.a,{direction:"row"},ot.map((function(e){return r.a.createElement(T.a,{href:e.href,label:e.label,key:e.label})})))),r.a.createElement(R.a,null,r.a.createElement(I.a,{pad:"small"}),r.a.createElement(I.a,{fill:!0,align:"center"},r.a.createElement(I.a,{width:"medium"},r.a.createElement(F.a,{pad:"small"},r.a.createElement(D.a,{level:2,size:"medium"},"A new Community")),r.a.createElement(lt,{current_user:t.me.pk}))))))},ct=B.b().shape({name:B.c().min(5,"Too Short!").max(200,"Too Long!").required("Required"),description:B.c().min(15,"Too Short!").max(1e3,"Too Long!").required("Required"),position:B.c().min(4,"Too Short!").max(400,"Too Long!").required("Required"),startAt:B.a().required("Required"),endAt:B.a().required("Required")}),mt=n(60),ut=n.n(mt),st=n(167),dt=n.n(st),gt=n(335),pt=n(330),Et=n(327),bt=n(325),vt=n(326);n(227);function ft(e){var t=Object(a.useState)(e.current_user),n=Object(M.a)(t,1)[0],l=Object(x.a)(we),o=Object(M.a)(l,2),i=o[0],m=o[1],u=m.data,s=m.loading,d=m.error,g=Object(a.useState)(new Date),p=Object(M.a)(g,2),E=p[0],b=p[1],v=Object(a.useState)(new Date),f=Object(M.a)(v,2),h=f[0],y=f[1],j=Object(c.g)(),O=Object(c.h)(),w=Object(a.useState)(!1),C=Object(M.a)(w,2),k=C[0],S=C[1],A=function(){return S(void 0)},q=Object(V.a)({initialValues:{name:"",description:"",position:"",startAt:h,endAt:E},validationSchema:ct,onSubmit:function(){var e=Object(J.a)(z.a.mark((function e(t){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(i({variables:{name:t.name,eventCreator:n,description:t.description,position:t.position,startAt:ut()(t.startAt).format("YYYY-MM-DD"),endAt:ut()(t.endAt).format("YYYY-MM-DD")}}).then((function(e){if(e.data.addEvent.errors.length<1){var t=e.data.addEvent.event.id,n=O.params.slug;j.push("/communities/".concat(n,"/event/").concat(t))}})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return d&&console.log(d),s?r.a.createElement("p",null,s):r.a.createElement(r.a.Fragment,null,u?r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,{data:u.addEvent,error_field:"messages"}),r.a.createElement(ae,{data:u.addEvent,message:"Event created successfuly you will be redirected soon"})):void 0,r.a.createElement(W.a,null,r.a.createElement("label",{htmlFor:"name"}),r.a.createElement(K.a,{id:"name",name:"name",placeholder:"your event name",type:"text",onChange:q.handleChange}),q.errors.name&&q.touched.name?r.a.createElement("div",null,q.errors.name):null,r.a.createElement("label",{htmlFor:"position"}),r.a.createElement(K.a,{id:"position",name:"position",placeholder:"your event position",onChange:q.handleChange}),q.errors.position&&q.touched.position?r.a.createElement("div",null,q.errors.position):null,r.a.createElement("label",{htmlFor:"description"}),r.a.createElement(H.a,{icon:r.a.createElement(bt.a,null),onClick:function(){return S(!0)}}),r.a.createElement(gt.a,{id:"description",name:"description",placeholder:"your event description",onChange:q.handleChange,size:"xlarge",resize:!1}),q.errors.description&&q.touched.description?r.a.createElement("div",null,q.errors.description):null,r.a.createElement("label",{htmlFor:"startAt"},"Start at"),r.a.createElement(dt.a,{id:"startAt",name:"startAt",selected:h,onChange:function(e){var t=ut()(e).format("YYYY-MM-DD");y(e),q.setFieldValue("startAt",t)}}),r.a.createElement("br",null),q.errors.startAt&&q.touched.startAt?r.a.createElement("div",null,q.errors.startAt):null,r.a.createElement("label",{htmlFor:"endAt"},"End at"),r.a.createElement(dt.a,{id:"endAt",name:"endAt",selected:E,onChange:function(e){var t=ut()(e).format("YYYY-MM-DD");b(e),q.setFieldValue("endAt",t)}}),r.a.createElement("br",null),q.errors.endAt&&q.touched.endAt?r.a.createElement("div",null,q.errors.endAt):null,r.a.createElement(H.a,{primary:!0,color:"dark-1",label:"Submit",onClick:q.handleSubmit,type:"submit"})),k&&r.a.createElement(pt.a,{onClickOutside:A,onEsc:A,margin:{left:"40px",top:"50px",right:"30px",bottom:"10px"}},r.a.createElement(I.a,{flex:!1,direction:"row",justify:"between"},r.a.createElement(D.a,{level:2,margin:"none"},"Description preview"),r.a.createElement(H.a,{icon:r.a.createElement(vt.a,null),onClick:A})),r.a.createElement(I.a,{width:"100vw",margin:{left:"2px",top:"2px",right:"2px",bottom:"2px"},height:"80vh",overflow:"auto"},r.a.createElement(Et.a,null,q.values.description))))}function ht(e){var t=Object(x.b)(Ge,{variables:{slug:e.slug}}),n=t.data,a=t.loading,l=Object(x.a)(Xe),o=Object(M.a)(l,1)[0];return a&&!n?r.a.createElement("div",null,"Loading ... "):r.a.createElement(r.a.Fragment,null,n?r.a.createElement(me.a,{data:n.getCommunityJoinRequests},(function(e){return r.a.createElement(I.a,{key:e.id,fill:!0},r.a.createElement(D.a,{level:"4"},e.member.firstName," ",e.member.lastName),r.a.createElement(H.a,{primary:!0,color:"dark-1",label:"accept this user",onClick:function(t){o({variables:{id:Number(e.id)}})},type:"button"}))})):r.a.createElement("div",null,"Nothing here to see ..."))}function yt(e){var t=Object(x.b)(Qe,{variables:{slug:e.slug}}),n=t.data,a=t.loading,l=Object(c.g)();return a&&!n?r.a.createElement("div",null,"Loading ... "):r.a.createElement(r.a.Fragment,null,n?r.a.createElement(me.a,{primaryKey:function(e){return r.a.createElement(ue.a,null,e.member.email)},secondaryKey:"",onClickItem:function(e){l.push("/profiles/".concat(e.item.username))},data:n.getCommunityMembers}):r.a.createElement("div",null,"Nothing here to see ..."))}function jt(e){var t=Object(c.h)(),n=Object(c.g)(),a=Object(x.b)(Ae,{variables:{slug:t.params.slug}}),l=a.data,o=a.loading,i=a.error;return i&&console.log(i),o?r.a.createElement("div",null,"Loading"):r.a.createElement(r.a.Fragment,null,l?r.a.createElement(me.a,{data:l.getCommunityEventsBySlug},(function(t){return r.a.createElement(I.a,{key:t.id,onClick:function(a){return n.push("/communities/".concat(e.community_slug,"/event/").concat(t.id))},fill:!0},r.a.createElement(D.a,{level:"4"},t.name),r.a.createElement(ue.a,{size:"small"}," on ",t.startAt),r.a.createElement(ue.a,{size:"small"}," place  ",t.position))})):r.a.createElement("div",null,"Loading..."))}var Ot=[{label:"go back to dashboard",href:"/dashboard/me"},{label:"Logout ",href:"/logout"}];function wt(e){var t=Object(x.a)(Ne),n=Object(M.a)(t,1)[0],a=Object(x.b)(xe,{variables:{id:Number(e.id)}}),l=a.data;return a.loading?r.a.createElement("div",null," Loading ... "):r.a.createElement(me.a,{primaryKey:function(e){return r.a.createElement("div",null,r.a.createElement(ue.a,null,e.member.email),r.a.createElement(H.a,{onClick:function(t){n({variables:{id:e.id}})},label:"Accept"}))},data:l.getEventRequestPending})}function Ct(e){var t=Object(c.g)(),n=Object(x.b)(Fe,{variables:{id:Number(e.id)}}),a=n.data;return n.loading?r.a.createElement("div",null," Loading ... "):r.a.createElement(me.a,{primaryKey:function(e){return r.a.createElement("div",null,r.a.createElement(ue.a,null,e.member.email))},onClickItem:function(e){t.push("/profiles/".concat(e.item.member.id))},data:a.getEventRequestAccepted})}var kt=n(336),St=[{label:"go back to dashboard",href:"/dashboard/me"},{label:"Logout ",href:"/logout"}];function At(){var e=Object(c.h)(),t=Object(x.a)($e),n=Object(M.a)(t,1)[0],a=Object(x.b)(qe,{variables:{id:e.params.id}}),l=a.data,o=a.error,i=a.loading;return o?r.a.createElement("div",null," Error"):i?r.a.createElement("div",null,"Loading ... "):r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{background:"dark-1",pad:"small"},r.a.createElement(L.a,{direction:"row"},St.map((function(e){return r.a.createElement(T.a,{href:e.href,label:e.label,key:e.label})})))),r.a.createElement(R.a,null,r.a.createElement(I.a,{fill:!0,align:"center"},r.a.createElement(F.a,{background:{color:"#CDEAC4"},pad:{bottom:"medium"},direction:"column",fill:!0},r.a.createElement(D.a,{level:1,color:"white",size:"large"},l?l.getCurrentEvent.name:void 0),r.a.createElement(ue.a,null,"Owner : ",l.getCurrentEvent.eventCreator.owner.firstName," ",l.getCurrentEvent.eventCreator.owner.lastName," "),r.a.createElement(ue.a,null,"Community : ",l.getCurrentEvent.eventCreator.owner.firstName," ",l.getCurrentEvent.eventCreator.community.lastName," "),r.a.createElement(ue.a,null,"created at :"," ",ut()(l.getCurrentEvent.createdAt).format("MMM Do YYYY")," "),r.a.createElement(H.a,{label:"join this event",onClick:function(){n({variables:{eventId:l.getCurrentEvent.id}})}}))),r.a.createElement(I.a,{width:"medium",margin:"large",pad:"medium"},r.a.createElement(et.a,null,r.a.createElement(tt.a,{title:"Join requests"},r.a.createElement(wt,{id:l.getCurrentEvent.id})),r.a.createElement(tt.a,{title:"Members"},r.a.createElement(Ct,{id:l.getCurrentEvent.id}))),r.a.createElement(T.a,{label:"Go to community page",href:"/communities/".concat(l.getCurrentEvent.eventCreator.community.slug)}),r.a.createElement(kt.a,{textAlign:"center"},l.getCurrentEvent.description))))}n(284);var qt=n(329),$t=n(201);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(m.a,{client:q},r.a.createElement(i.a,null,r.a.createElement(qt.a,{theme:$t.grommet},r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:"/",component:_}),r.a.createElement(c.b,{exact:!0,path:"/signup",component:le}),r.a.createElement(c.b,{exact:!0,path:"/signin",component:ce}),r.a.createElement(c.b,{exact:!0,path:"/logout",component:function(){return localStorage.removeItem("jwt"),localStorage.removeItem("jwt_refresh"),localStorage.removeItem("user_id"),q.resetStore(),r.a.createElement(c.a,{to:"/"})}}),r.a.createElement(c.b,{path:"/dashboard/:name",component:at}),r.a.createElement(c.b,{exact:!0,path:"/create-community",component:it}),r.a.createElement(c.b,{exact:!0,path:"/communities/:slug",component:function(){var e=Object(c.h)(),t=Object(x.a)(He),n=Object(M.a)(t,1)[0],a=Object(x.b)(We,{variables:{slug:e.params.slug}}),l=a.data,o=a.loading,i=a.error,m=function(){var e=Object(J.a)(z.a.mark((function e(t){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({variables:{community:Number(l.getCommunitysBySlug.community.id)}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(i&&console.log(i),o)return r.a.createElement("div",null,"Loading");var u=l.getCommunitysBySlug.owner.email===localStorage.getItem("user_email");return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{background:"dark-1",pad:"small"},r.a.createElement(L.a,{direction:"row"},Ot.map((function(e){return r.a.createElement(T.a,{href:e.href,label:e.label,key:e.label})})))),r.a.createElement(R.a,null,r.a.createElement(I.a,{fill:!0,align:"center"},r.a.createElement(F.a,{background:{color:"#CDEAC4"},pad:{bottom:"medium"},direction:"column",fill:!0},r.a.createElement(D.a,{level:1,color:"white",size:"large",width:"100vw"},l?l.getCommunitysBySlug.community.name:void 0),r.a.createElement(ue.a,null,"Owner : ",l.getCommunitysBySlug.owner.firstName," ",l.getCommunitysBySlug.owner.lastName),r.a.createElement(ue.a,null,"created at :"," ",ut()(l.getCommunitysBySlug.community.createdAt).format("MMM Do YYYY")," "),u?"":r.a.createElement(H.a,{primary:!0,color:"dark-1",label:"join this community",onClick:m,type:"button"})),r.a.createElement(I.a,{width:"large"},r.a.createElement(et.a,null,r.a.createElement(tt.a,{title:"Events"},r.a.createElement(jt,{community_slug:e.params.slug})),r.a.createElement(tt.a,{title:"Members"},r.a.createElement(yt,{slug:e.params.slug})),u?r.a.createElement(tt.a,{title:"Join Request"},r.a.createElement(ht,{slug:e.params.slug})):void 0,u?r.a.createElement(tt.a,{title:"add Events"},r.a.createElement(I.a,{pad:"medium"},r.a.createElement(ft,{current_user:l.getCommunitysBySlug.id}))):void 0)))))}}),r.a.createElement(c.b,{path:"/communities/:slug/event/:id",component:At}),r.a.createElement(c.b,{path:"/event/:id",component:At})))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[210,1,2]]]);
//# sourceMappingURL=main.9402b60e.chunk.js.map